<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <meta name="theme-color" content="#0b1426" />
    <title>Retro Arcade</title>

    <style>
      :root {
        --green: #00ff66;
        --green2: #00ffaa;
        --dim: rgba(0, 255, 102, 0.45);
        --panel: rgba(0, 10, 6, 0.35);
      }

      html, body {
        height: 100%;
        margin: 0;
        background: #000;
        color: var(--green);
        font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
      }

      .menu {
        min-height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        text-align: center;
        padding: 80px 18px 30px;
      }

      h1 {
        margin: 0 0 6px;
        font-size: 28px;
        text-shadow: 0 0 12px var(--green);
      }

      .menu-subtitle {
        margin-bottom: 18px;
        opacity: 0.75;
        font-size: 14px;
      }

      .menu-items {
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 100%;
        max-width: 380px;
      }

      .retro-btn {
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        padding: 14px 16px 14px 36px;
        border: 1px solid var(--dim);
        border-radius: 12px;
        color: var(--green);
        text-decoration: none;
        font-size: 18px;
        background: rgba(0, 0, 0, 0.25);
        box-shadow: 0 0 8px rgba(0, 255, 102, 0.22);
        transition: all 0.12s ease;
      }

      .retro-btn::before {
        content: "‚ñ∂";
        position: absolute;
        left: 12px;
        opacity: 0;
        transform: translateX(-6px);
        transition: all 0.12s ease;
      }

      .retro-btn:hover,
      .retro-btn.active {
        transform: scale(1.03);
        color: var(--green2);
        border-color: var(--green2);
        box-shadow: 0 0 16px rgba(0, 255, 170, 0.55);
      }

      .retro-btn:hover::before,
      .retro-btn.active::before {
        opacity: 1;
        transform: translateX(0);
      }

      .label span {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .best-badge {
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(0, 255, 102, 0.35);
        background: rgba(0, 255, 102, 0.06);
        color: rgba(0, 255, 170, 0.9);
        letter-spacing: 0.12em;
        white-space: nowrap;
      }

      .best-badge b {
        color: #eafff5;
        letter-spacing: 0.06em;
      }

      .menu-hint {
        margin-top: 18px;
        font-size: 12px;
        opacity: 0.65;
        max-width: 560px;
      }
    </style>
  </head>

  <body>
    <div class="menu" role="navigation">
      <h1>üéÆ Retro Game Hub</h1>
      <div class="menu-subtitle">Tap to play ¬∑ BEST auto-saved</div>

      <nav class="menu-items" id="menu">
        <a class="retro-btn" href="./flappy.html" data-id="flappy" data-best-key="flappy-best">
          <span class="label"><span>üê§ Flappy Bird</span></span>
          <span class="best-badge">BEST <b data-best-for="flappy">‚Äî</b></span>
        </a>

        <a class="retro-btn" href="./snake.html" data-id="snake" data-best-key="snake-best">
          <span class="label"><span>üêç Snake</span></span>
          <span class="best-badge">BEST <b data-best-for="snake">‚Äî</b></span>
        </a>

        <a class="retro-btn" href="./pong.html" data-id="pong" data-best-key="pong-best">
          <span class="label"><span>üèì Pong</span></span>
          <span class="best-badge">BEST <b data-best-for="pong">‚Äî</b></span>
        </a>

        <a class="retro-btn" href="./tetris.html" data-id="tetris" data-best-key="tetris-best">
          <span class="label"><span>üßä Tetris</span></span>
          <span class="best-badge">BEST <b data-best-for="tetris">‚Äî</b></span>
        </a>

        <!-- Neon Stack -->
        <a class="retro-btn" href="./stack.html" data-id="stack" data-best-key="neon-stack-best">
          <span class="label"><span>üèó Neon Stack</span></span>
          <span class="best-badge">BEST <b data-best-for="stack">‚Äî</b></span>
        </a>

        <!-- Neon Dodge -->
        <a class="retro-btn" href="./neon-dodge.html" data-id="neon-dodge" data-best-key="neon-rage-dodge-best">
          <span class="label"><span>‚ö° Neon Dodge</span></span>
          <span class="best-badge">BEST <b data-best-for="neon-dodge">‚Äî</b></span>
        </a>

        <!-- Beat Drop -->
        <a class="retro-btn" href="./beatdrop.html" data-id="beatdrop" data-best-key="beatdrop-best">
          <span class="label"><span>üéµ Neon Beat Drop</span></span>
          <span class="best-badge">BEST <b data-best-for="beatdrop">‚Äî</b></span>
        </a>
      </nav>

      <p class="menu-hint">
        BEST will appear after you play each game once.
      </p>
    </div>

    <script>
      function parseBest(raw) {
        if (raw == null) return null;
        const n = Number(raw);
        if (!isNaN(n)) return Math.floor(n);
        try {
          const o = JSON.parse(raw);
          if (typeof o.best === "number") return Math.floor(o.best);
          if (typeof o.score === "number") return Math.floor(o.score);
        } catch {}
        return null;
      }

      function findBest(id, primary) {
        const keys = [
          primary,
          `${id}-best`,
          `${id}_best`,
          `${id}-highscore`,
          `neon-rage-dodge-best`,
          `neon-dodge-best`
        ];

        for (const k of keys) {
          const v = parseBest(localStorage.getItem(k));
          if (v != null) return v;
        }

        for (let i = 0; i < localStorage.length; i++) {
          const k = localStorage.key(i);
          if (k && k.toLowerCase().includes(id)) {
            const v = parseBest(localStorage.getItem(k));
            if (v != null) return v;
          }
        }
        return null;
      }

      document.querySelectorAll(".retro-btn").forEach(btn => {
        const id = btn.dataset.id;
        const key = btn.dataset.bestKey;
        const target = btn.querySelector("[data-best-for]");
        const best = findBest(id, key);
        if (best != null) target.textContent = best;
      });
    </script>
  </body>
</html>
